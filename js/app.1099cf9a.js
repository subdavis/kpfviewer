(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)o=s[u],a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/kpfviewer/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[t.location?r("v-container",{attrs:{fluid:""}},[r("div",{staticClass:"annotation-view"},[r("tdm-app",{attrs:{autoplay:!1,loading:t.loading,tdm:t.tdm,"video-width":1920,"video-height":1080,duration:300,framerate:30,"color-by":t.colorBy,"label-format":t.labelFormat,meta:["name","type","actor_id","src_status"],url:t.url},on:{"update:colorBy":function(e){t.colorBy=e}}},[r("v-card",{staticClass:"mb-2",attrs:{slot:"title"},slot:"title"},[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("h3",{staticClass:"headline"},[t._v("Girder KPF Viewer")])])]),r("v-card-text",[r("p",[t._v("Upload files named *.mp4, *.activities.yml, *.geom.yml, and *.types.yml to a folderin your user space on data.kitware.com and browse to it through the data\nbrowser below.  Use of private access controls is recommended.\nYou must be logged in on data.kitware.com.")])]),r("selection-widget",{staticClass:"pa-2",attrs:{tdm:t.tdm,"color-by":t.colorBy,"color-map":t.colorMap,"state-map":t.stateMap},on:{"update:stateMap":function(e){t.stateMap=e}}})],1),r("div",{attrs:{slot:"widget"},slot:"widget"},[r("v-card",{staticClass:"my-2"},[t.location?r("girder-browser",{attrs:{location:t.location,"new-folder-enabled":!1,"new-item-enabled":!1,"select-enabled":!1},on:{"update:location":function(e){t.location=e}}}):t._e()],1)],1)],1)],1)]):r("v-container",[r("girder-auth",{attrs:{oauth:!0}})],1)],1)},i=[],o=r("5d73"),s=r.n(o),c=r("75fc"),l=(r("7f7f"),r("96cf"),r("3b8d")),d=r("fca9"),u=r("0856"),p=r("06a2"),f=r("6b94"),h=r("b2eb"),m=["types.yml","activities.yml","geom.yml",".mp4"],b={components:{TdmApp:h["c"],KpfWidget:h["a"],SelectionWidget:h["b"],GirderUpload:d["c"],GirderAuth:d["a"],GirderBrowser:d["b"]},inject:["girderRest"],data:function(){return{loading:!1,tdm:Object(f["i"])([],0),colorBy:"name",colorMap:null,stateMap:null,labelFormat:["name","actor_id"],location:null,url:""}},watch:{colorBy:function(t){this.colorMap=Object(f["f"])(this.tdm,t),this.stateMap=Object(f["j"])(this.tdm,t)},location:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("folder"===e._modelType){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.girderRest.get("item",{params:{folderId:e._id}});case 4:r=t.sent,n=r.data,a=m.every(function(t){return n.some(function(e){return e.name.indexOf(t)>=0})}),a&&this.loadTargets(n);case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},methods:{addTracks:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.tdm=Object(f["i"])((r=[]).concat.apply(r,Object(c["a"])(e).concat(Object(c["a"])(this.tdm.proxy.tracks))),0),this.colorMap=Object(f["f"])(this.tdm,this.colorBy),this.stateMap=Object(f["j"])(this.tdm,this.colorBy);case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadTargets:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var r,n,a,i,o,c,l,d,h,b,v,g,y,w,x,O,j,_;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.loading=!0,r={},n=!0,a=!1,i=void 0,t.prev=5,o=s()(e);case 7:if(n=(c=o.next()).done){t.next=24;break}l=c.value,d=0;case 10:if(!(d<m.length)){t.next=21;break}if(h=m[d],!(l.name.indexOf(h)>=0)){t.next=18;break}return t.next=15,this.girderRest.get("item/".concat(l._id,"/files"));case 15:b=t.sent,v=b.data,h.indexOf("yml")>=0?r[h]="file/".concat(v[0]._id,"/download"):h.indexOf("mp4")>=0&&(this.url="".concat(this.girderRest.apiRoot,"/file/").concat(v[0]._id,"/download"));case 18:d++,t.next=10;break;case 21:n=!0,t.next=7;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](5),a=!0,i=t.t0;case 30:t.prev=30,t.prev=31,n||null==o.return||o.return();case 33:if(t.prev=33,!a){t.next=36;break}throw i;case 36:return t.finish(33);case 37:return t.finish(30);case 38:return t.next=40,this.girderRest.get(r["activities.yml"]);case 40:return g=t.sent,y=g.data,t.next=44,this.girderRest.get(r["geom.yml"]);case 44:return w=t.sent,x=w.data,t.next=48,this.girderRest.get(r["types.yml"]);case 48:O=t.sent,j=O.data,_=u["b"].fromText(y,x,j),this.tdm=Object(f["i"])(Object(p["a"])(_),0),this.colorMap=Object(f["f"])(this.tdm,this.colorBy),this.stateMap=Object(f["j"])(this.tdm,this.colorBy),this.loading=!1;case 55:case"end":return t.stop()}},t,this,[[5,26,30,38],[31,,33,37]])}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.girderRest.user&&(this.location={_modelType:"user",_id:this.girderRest.user._id}),this.girderRest.$on("login",function(){t.location={_modelType:"user",_id:t.girderRest.user._id}})}},v=b,g=r("2877"),y=Object(g["a"])(v,a,i,!1,null,null,null);y.options.__file="App.vue";var w=y.exports,x=r("bc3a"),O=r.n(x),j=r("a7fe"),_=r.n(j),k=r("d842"),R=new k["a"]({apiRoot:"https://data.kitware.com/api/v1"});n["default"].use(k["b"]),n["default"].use(_.a,O.a),n["default"].config.productionTip=!1,R.fetchUser().then(function(){new n["default"]({provide:{girderRest:R},render:function(t){return t(w)}}).$mount("#app")})}});
//# sourceMappingURL=app.1099cf9a.js.map